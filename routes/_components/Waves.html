<button on:click='set({ fieldtype: "hexagonal" })'>
  hexagonal
</button>

<button on:click='set({ fieldtype: "rectangular" })'>
  rectangular
</button>

<button on:click="set({
  statecolors: ['#ff6738', '#18c8ff', '#efaf03', '#60f370'],
})">
  4 states
</button>

<button on:click="set({ statecolors: ['#ffffff', '#efefef'], })">
  2 states
</button>

<button on:click="generateField({ x, y, initializer: (n, i) => (n % i), field: [] })">initialize empty field</button>

<CA id={id} name={name} field={field} fieldtype={fieldtype} type={algorithm.name} x={x} y={y} statecolors={statecolors} size="1"
/>

<script>
  import CA from './CA.html';
  import { WavesDefault, hexagonal, rectangular } from '../../modules'

  const [x, y] = [8, 8]
  const field = []
  // store.set({
  //   field,
  //   x,
  //   y,
  // })

  const fieldGen = type => {
    const _default = 'rectangular'
    const generators = {
      'hexagonal': hexagonal.field,
      'rectangular': rectangular.field,
    }
    return (type in generators) ? generators[type] : generators[_default]
  }
  export default {
    oncreate() {
      console.log('init GameofLife')
    },
    data() {
      return Object.assign({
        x,
        y,
        field
      }, WavesDefault)
    },
    methods: {
      generateField: function ({ x, y, initializer, field }) {
        const { statecolors, fieldtype } = this.get()
        const states = statecolors.length
        const f = fieldGen(fieldtype)(x, y, states, initializer)
        this.set({ field: f })
      }
    },
    components: {
      CA,
    }
  }
</script>

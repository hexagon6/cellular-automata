<div class="container">
<span>[{id} - {name}] {$fieldtype} CA of type: "{type}"</span>
<Field
  name="{name}"
  x="{x}"
  y="{y}"
  field="{field}"
  statecolors="{statecolors}"
  cx="{cx}"
  cy="{cy}"
  size="{size}"
/>
</div>

<style>
  .container {
    border: 1px solid orange;
    background-color: #5f5f7f;
    color: white;
  }
</style>
<script>
import Field from './Field.html'
import { hexagonal, algorithm, rectangular } from '../../modules'

// TODO: extract this function
const fieldGen = type => {
  const _default = 'rectangular'
  const generators = {
    'hexagonal': hexagonal.field,
    'rectangular': rectangular.field,
  }
  return (type in generators) ? generators[type] : generators[_default]
}

const shapeDimensions = (type, factor) => {
  const _default = 'rectangular'
  const shapes = {
    'hexagonal': {
      cx: 44 * factor,
      cy: 25 * factor,
    },
    'rectangular': {
      cx: 40 * factor,
      cy: 40 * factor,
    }
  }
  return (type in shapes) ? shapes[type] : shapes[_default]
}

const initializer = (_, s) => Math.floor(Math.random() * s)
export default {
  data() {
    return {
      field: [],
      x: 0,
      y: 0,
      statecolors: [],
      size: 1,
    }
  },
  computed: {
    cx: ({ $fieldtype, size }) => shapeDimensions($fieldtype, size).cx,
    cy: ({ $fieldtype, size }) => shapeDimensions($fieldtype, size).cy
  },
  components: {
    Field,
  }
}
</script>

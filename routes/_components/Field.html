{{#if fieldtype === 'hexagonal'}}
<svg width="{{(x+2) * cx * 2}}" height="{{(y + 1) * cy}}">
  <defs>
    <polygon id="hexagon" points="{{hexagon}}" />
  </defs>
  <g>
    <rect
      width="{{x * cx * 2 + 0.2 * cx}}"
      height="{{y * cy + 0.5 * cy}}"
      fill="#efefef"
    />
{{#each field as f, i}}
      <g>
        <use
          x="{{(f.y % 2 === 0) ? f.x * 2 * cx :  (f.x + 0.5) * 2 * cx}}"
          y="{{f.y * cy}}"
          xlink:href="#hexagon" fill="{{states[f.v]}}" stroke="#efefef" stroke-opacity="0.2" />
        <!--
          <text
          x="{{(f.y % 2 === 0) ? f.x * 2 * cx :  (f.x + 0.5) * 2 * cx}}"
          y="{{f.y * cy}}"
          font-size="{{cy}}px"
        >{{i}}[{{f.x}},{{f.y}}]</text>
        -->
      </g>
{{/each}}
  </g>
</svg>
{{/if}}

{{#if fieldtype === 'rectangular'}}
<svg width="{{x * cx}}" height="{{y * cy}}">
  <defs>
    <rect
      id="rectangle"
      width={{cx}}
      height={{cy}}
    />
  </defs>
  <g>
    {{#each field as f, i}}
    <use
      x="{{f.x * cx}}" y="{{f.y * cy}}"
      xlink:href="#rectangle" fill="{{states[f.v]}}" stroke="#efefef" stroke-opacity="0.2" />
      on:click="click({x, y})"
    />
    {{/each}}
  </g>
</svg>
{{/if}}
<span class="overview">
  <LabeledList elements="{{
    {
      x,
      y,
      cells: x * y,
      cx,
      cy,
    }
    }}"
  />
  <div>
  <ul>
    {{#each states as _s}}
      <li>
      <span style="{{`color: ${_s};`}}">[{{_s}}]</span></li> {{/each}}
  </ul>
  </div>
</span>


<style>
  span.overview{
    width: 10vw;
    color: violet;
    font-weight: 700;
    font-size: 0.5em;
  }

  svg {
    width: 70vw;
    border: 1px solid white;
  }


  ul {
    font-weight: 300;
    font-style: italic;
    list-style: none;
  }

  li {
    display: block;
    float: left;
  }
</style>

<script>
import LabeledList from './LabeledList.html'
import { hexagonal } from '../../modules'

const { scale } = hexagonal

export default {
  data() {
    return {
      hexagon: scale(1),
    }
  },
  computed: {
    hexagon: size => scale(size)
  },
  methods: {
    click: function({x, y}) { console.log(x, y) }
  },
  components: {
    LabeledList,
  }
}
</script>
